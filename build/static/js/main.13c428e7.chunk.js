(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,a,t){e.exports={container:"App_container__2vuJ-",app:"App_app__2J1j3"}},29:function(e,a,t){e.exports=t.p+"static/media/logout.ada60a6b.png"},3:function(e,a,t){e.exports={navbar:"Navbar_navbar__1JgC0",flexBlock:"Navbar_flexBlock__2BvvT",logo:"Navbar_logo__3bqPP",ham:"Navbar_ham__2MFTF",menu:"Navbar_menu__MRRUs",item:"Navbar_item__2tgaB",link:"Navbar_link__1c_bD",colored:"Navbar_colored__3XVyX",icon:"Navbar_icon__3TotU",overlay:"Navbar_overlay__2oL5v",message:"Navbar_message__1SjwF",messageMedia:"Navbar_messageMedia__2BsmI",active:"Navbar_active__1E0bl",text:"Navbar_text__3xSPi",submit:"Navbar_submit__1nc2U",span:"Navbar_span__UY2bQ",line:"Navbar_line__2ABHD",open:"Navbar_open__1XpyJ",title:"Navbar_title__2wJZz"}},30:function(e,a,t){e.exports=t(42)},35:function(e,a,t){},4:function(e,a,t){e.exports={block:"AuthPage_block__3okvp",page:"AuthPage_page__tHGok",pageMedia:"AuthPage_pageMedia__15NYK",heading:"AuthPage_heading__2LAT-",headingMedia:"AuthPage_headingMedia__3MG2p",form:"AuthPage_form__2GKKp",inputBlock:"AuthPage_inputBlock__Yd5Qv",inputBlockMedia:"AuthPage_inputBlockMedia__C53VG",input:"AuthPage_input__ErqpO",label:"AuthPage_label__13Ol4",buttons:"AuthPage_buttons__2Y3FG",btn:"AuthPage_btn__2Uoib",btnMedia:"AuthPage_btnMedia__1br9o",message:"AuthPage_message__3MoS9",loading:"AuthPage_loading__3tDbW",loading2:"AuthPage_loading2__TcIS9",warn:"AuthPage_warn__2TV-1"}},42:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(12),l=t.n(r),o=(t(35),t(26)),s=t.n(o),i=t(14),u=t(10),m=t(11),p=t.n(m),b=t(15),g=t(18),_=t(19),d=t(9),v=t(4),h=t.n(v),f=t(13),E=(t(21),t(16)),N=Object(n.createContext)({token:null,userId:null,login:!1,logout:!1,isAuthentificated:!1}),k=function(){var e=Object(n.useContext)(N),a=Object(n.useCallback)((function(e){e&&f.b.error(e)}),[]),t=Object(n.useCallback)((function(e){e&&f.b.success(e)}),[]),r=function(){var e=Object(n.useState)(!1),a=Object(d.a)(e,2),t=a[0],c=a[1],r=Object(n.useState)(null),l=Object(d.a)(r,2),o=l[0],s=l[1];return{loading:t,request:Object(n.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(a){var t,n,r,l,o,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2&&void 0!==i[2]?i[2]:null,r=i.length>3&&void 0!==i[3]?i[3]:{},c(!0),e.prev=4,n&&(n=JSON.stringify(n),r["Content-Type"]="application/json"),e.next=8,fetch(a,{method:t,body:n,headers:r}).then(c(!0));case 8:return l=e.sent,e.next=11,l.json().then(c(!1));case 11:if(o=e.sent,l.ok){e.next=14;break}throw new Error(o.message||"Something went wrong");case 14:return c(!1),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(4),c(!1),s(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(a){return e.apply(this,arguments)}}(),[]),error:o,clearError:Object(n.useCallback)((function(){return s(null)}),[])}}(),l=r.loading,o=r.request,s=r.error,i=r.clearError,u=Object(n.useState)({email:"",password:""}),m=Object(d.a)(u,2),v=m[0],k=m[1];Object(n.useEffect)((function(){a(s),i()}),[s,a,i]);var O=function(e){k(Object(_.a)({},v,Object(g.a)({},e.target.name,e.target.value)))},j=function(){var e=Object(b.a)(p.a.mark((function e(a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,o("/api/auth/register","POST",Object(_.a)({},v));case 4:"User has created"===(n=e.sent).message&&t(n.message),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),x=function(){var a=Object(b.a)(p.a.mark((function a(t){var n;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,a.next=4,o("/api/auth/login","POST",Object(_.a)({},v));case 4:n=a.sent,e.login(n.token,n.userId),a.next=10;break;case 8:a.prev=8,a.t0=a.catch(1);case 10:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}(),w=Object(E.useMediaQuery)({minDeviceWidth:520}),P=Object(E.useMediaQuery)({minDeviceWidth:370}),y=Object(n.createRef)();return c.a.createElement("div",{className:h.a.block},c.a.createElement(f.a,{position:"top-right",autoClose:3e3,ref:y}),c.a.createElement("div",{className:w?h.a.page:"".concat(h.a.page," ").concat(h.a.pageMedia)},c.a.createElement("h1",{className:P?h.a.heading:"".concat(h.a.heading," ").concat(h.a.headingMedia)},"Authorization"),c.a.createElement("form",{action:"#",className:h.a.form},c.a.createElement("div",{className:w?h.a.inputBlock:"".concat(h.a.inputBlock," ").concat(h.a.inputBlockMedia)},c.a.createElement("input",{type:"text",className:h.a.input,id:"email",name:"email",autoComplete:"off",placeholder:"Email",onChange:O}),c.a.createElement("label",{htmlFor:"email",className:h.a.label},"Email"),c.a.createElement("b",{className:h.a.warn},"Ex: *****@email.domain")),c.a.createElement("div",{className:w?h.a.inputBlock:"".concat(h.a.inputBlock," ").concat(h.a.inputBlockMedia)},c.a.createElement("input",{type:"password",className:h.a.input,id:"password",name:"password",autoComplete:"current-password",placeholder:"Password",onChange:O}),c.a.createElement("label",{htmlFor:"password",className:h.a.label},"Password"),c.a.createElement("b",{className:h.a.warn},"Must be minimum 6 characters"))),c.a.createElement("div",{className:h.a.buttons},c.a.createElement("a",{href:"/",type:"submit",className:l?h.a.loading:P?h.a.btn:"".concat(h.a.btn," ").concat(h.a.btnMedia),onClick:x},l?"":"Login"),c.a.createElement("a",{href:"/",type:"submit",className:l?h.a.loading:P?h.a.btn:"".concat(h.a.btn," ").concat(h.a.btnMedia),onClick:j},l?"":"Sign Up"))))},O=function(){return c.a.createElement("div",null,c.a.createElement("h2",{style:{marginLeft:"20px"}},"Page1"))},j=function(){return c.a.createElement("div",null,c.a.createElement("h2",{style:{marginLeft:"20px"}},"Page2"))},x=function(){return c.a.createElement("div",null,c.a.createElement("h2",{style:{marginLeft:"20px"}},"Page3"))},w=t(3),P=t.n(w),y=t(29),M=t.n(y),A=function(){var e=Object(u.g)(),a=Object(n.useContext)(N),t=Object(n.useState)(!1),r=Object(d.a)(t,2),l=r[0],o=r[1],s=Object(n.useState)(!1),m=Object(d.a)(s,2),p=m[0],b=m[1],g=function(a){a.preventDefault(),o(!1),e.push("/")},_=[{url:"/page1",id:1,text:"Page1"},{url:"/page2",id:2,text:"Page2"},{url:"/page3",id:3,text:"Page3"}].map((function(e){var a=e.url,t=e.id,n=e.text;return c.a.createElement("li",{key:t,className:P.a.item},c.a.createElement(i.b,{to:a,className:P.a.link},t,c.a.createElement("span",{className:"".concat(P.a.span," ").concat(p?P.a.open:"")},n)))})),v=Object(E.useMediaQuery)({minDeviceWidth:520});return c.a.createElement("nav",{className:"".concat(P.a.navbar," ").concat(p?P.a.open:"")},c.a.createElement("div",{className:P.a.flexBlock},c.a.createElement("div",{className:P.a.title},c.a.createElement("a",{href:"/",className:"".concat(P.a.logo," ").concat(p?P.a.open:"")},"Logo"),c.a.createElement("a",{href:"/",className:P.a.ham,onClick:function(e){e.preventDefault(),b(!1===p)}},c.a.createElement("span",{className:"".concat(P.a.line," ").concat(p?P.a.open:"")}),c.a.createElement("span",{className:P.a.line}),c.a.createElement("span",{className:"".concat(P.a.line," ").concat(p?P.a.open:"")}))),c.a.createElement("ul",{className:P.a.menu},_,c.a.createElement("li",{className:P.a.item},c.a.createElement("a",{href:"/",className:"".concat(P.a.link," ").concat(P.a.colored),onClick:function(e){e.preventDefault(),o(!0)}},c.a.createElement("img",{className:P.a.icon,src:M.a,alt:"logout"}))))),c.a.createElement("div",{className:"".concat(P.a.overlay," ").concat(l?P.a.active:!l),onClick:g}),c.a.createElement("div",{className:"".concat(v?P.a.message:"".concat(P.a.message," ").concat(P.a.messageMedia)," ").concat(P.a.message," ").concat(l?P.a.active:!l)},c.a.createElement("p",{className:P.a.text},"Are you sure, that you want to logout?"),c.a.createElement("a",{href:"/",className:"".concat(P.a.submit," ").concat(P.a.left),onClick:function(t){t.preventDefault(),a.logout(),e.push("/")}},"Yes"),c.a.createElement("a",{href:"/",className:"".concat(P.a.submit," ").concat(P.a.right),onClick:g},"No")))};var C=function(){var e=function(){var e=Object(n.useState)(null),a=Object(d.a)(e,2),t=a[0],c=a[1],r=Object(n.useState)(null),l=Object(d.a)(r,2),o=(l[0],l[1]),s=Object(n.useCallback)((function(e,a){c(e),o(a),localStorage.setItem("userData",JSON.stringify({userId:a,token:e}))}),[]),i=Object(n.useCallback)((function(){c(null),o(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&s(e.token,e.userId)}),[s]),{login:s,logout:i,token:t}}(),a=e.token,t=e.login,r=e.logout,l=e.userId,o=!!a,m=function(e){return e?c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/page1",exact:!0},c.a.createElement(O,null)),c.a.createElement(u.b,{path:"/page2",exact:!0},c.a.createElement(j,null)),c.a.createElement(u.b,{path:"/page3",exact:!0},c.a.createElement(x,null)),c.a.createElement(u.a,{to:"/page1"})):c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/",exact:!0},c.a.createElement(k,null)),c.a.createElement(u.a,{to:"/"}))}(o);return c.a.createElement(N.Provider,{value:{token:a,login:t,logout:r,userId:l,isAuthentificated:o}},c.a.createElement(i.a,null,c.a.createElement("div",{className:s.a.app},o&&c.a.createElement(A,null),m)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.13c428e7.chunk.js.map